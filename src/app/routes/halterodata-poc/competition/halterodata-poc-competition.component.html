<div class="mb-8">
  <!-- Header Compétition Card -->
  <div
    class="relative overflow-hidden rounded-2xl border border-[#212e56]/50 bg-gradient-to-br from-[#0c1c3c]/90 to-[#050811]/90 shadow-2xl backdrop-blur-xl"
  >
    <!-- Gradient overlay -->
    <div
      class="absolute inset-0 bg-gradient-to-t from-[#050811] via-transparent to-transparent"
    ></div>

    <!-- Contenu -->
    <div class="relative p-6">
      <!-- En-tête principal -->
      <div class="mb-6">
        <h2 class="text-2xl font-bold text-white sm:text-3xl">
          {{ competition?.name || "Compétition" }}
        </h2>
        <div
          class="mt-3 flex flex-wrap items-center gap-3 text-sm text-[#a8b2d2]"
        >
          <span class="flex items-center gap-1">
            <svg
              class="h-4 w-4"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M8 7V3m8 4V3m-9 8h18M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
              />
            </svg>
            {{ competition?.date | date: "shortDate" }}
          </span>
          <span class="flex items-center gap-1">
            <svg
              class="h-4 w-4"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"
              />
            </svg>
            {{ competition?.league }}
          </span>
        </div>
      </div>

      <!-- Pillules d'état -->
      <div class="mb-6 flex flex-wrap items-center gap-2">
        <div
          [ngClass]="{
            'border-[#4a9eff]/50 bg-[#4a9eff]/20 text-[#4a9eff]':
              competition?.state === 0,
            'border-[#22c55e]/50 bg-[#22c55e]/20 text-[#22c55e]':
              competition?.state === 1,
          }"
          class="rounded-full border px-3 py-1 text-xs font-semibold uppercase tracking-wide"
        >
          {{ competition?.state === 0 ? "En cours" : "Terminé" }}
        </div>
        <div
          [ngClass]="{
            'border-[#8b5cf6]/50 bg-[#8b5cf6]/20 text-[#8b5cf6]':
              competition?.gender === 0,
            'border-[#ec4899]/50 bg-[#ec4899]/20 text-[#ec4899]':
              competition?.gender === 1,
            'border-[#06b6d4]/50 bg-[#06b6d4]/20 text-[#06b6d4]':
              competition?.gender === 2,
          }"
          class="rounded-full border px-3 py-1 text-xs font-semibold uppercase tracking-wide"
        >
          {{
            competition?.gender === 0
              ? "Masculin"
              : competition?.gender === 1
                ? "Féminin"
                : "Mixte"
          }}
        </div>
        <div
          [ngClass]="{
            'border-[#f97316]/50 bg-[#f97316]/20 text-[#f97316]':
              !competition?.type,
            'border-[#14b8a6]/50 bg-[#14b8a6]/20 text-[#14b8a6]':
              competition?.type,
          }"
          class="rounded-full border px-3 py-1 text-xs font-semibold uppercase tracking-wide"
        >
          {{ competition?.type ? "En équipe" : "Individuelle" }}
        </div>
      </div>
    </div>
  </div>
</div>

<div class="space-y-8">
  <div *ngIf="loading" class="text-center text-sm text-[#a8b2d2]">
    Chargement des inscriptions...
  </div>

  <div
    class="overflow-hidden rounded-2xl border border-[#212e56]/50 bg-[#050811]/40"
  >
    <div class="overflow-x-auto">
      <table class="min-w-full divide-y divide-[#2b3658]">
        <thead class="bg-[#0b172b]/60">
          <tr class="text-sm text-[#a8b2d2]">
            <th class="px-3 py-2 text-left">Licence</th>
            <th class="px-3 py-2 text-left">Nom</th>
            <th class="px-3 py-2 text-left">Club</th>
            <th class="px-3 py-2 text-left">Nation</th>
            <th class="px-3 py-2 text-left">Poids</th>
            <th class="px-3 py-2 text-left">Snatch 1</th>
            <th class="px-3 py-2 text-left">Snatch 2</th>
            <th class="px-3 py-2 text-left">Snatch 3</th>
            <th class="px-3 py-2 text-left">CJ 1</th>
            <th class="px-3 py-2 text-left">CJ 2</th>
            <th class="px-3 py-2 text-left">CJ 3</th>
          </tr>
        </thead>
        <tbody
          class="divide-y divide-[#24304f] bg-[#07122a]/40 text-white"
          *ngIf="competition != null && competition.details != null"
        >
          <tr
            *ngFor="let entry of competition.details || []; trackBy: trackById"
            class="text-sm hover:bg-[#07122a]/30"
          >
            <td class="px-3 py-3">{{ entry.athlete?.licenceId || "—" }}</td>
            <td class="px-3 py-3">
              <a
                [routerLink]="['/halterodatapoc/athlete', entry.athlete?.id]"
                class="text-[#4a9eff] hover:underline"
              >
                {{ entry.athlete?.fullName || "—" }}
              </a>
            </td>
            <td class="px-3 py-3">{{ entry.club || "—" }}</td>
            <td class="px-3 py-3">{{ entry.countryCode || "—" }}</td>
            <td class="px-3 py-3">
              {{
                entry.bodyWeight !== null && entry.bodyWeight !== undefined
                  ? entry.bodyWeight
                  : "—"
              }}
            </td>
            <td class="px-3 py-3">
              {{
                entry.snatch1 !== null && entry.snatch1 !== undefined
                  ? entry.snatch1
                  : "—"
              }}
            </td>
            <td class="px-3 py-3">
              {{
                entry.snatch2 !== null && entry.snatch2 !== undefined
                  ? entry.snatch2
                  : "—"
              }}
            </td>
            <td class="px-3 py-3">
              {{
                entry.snatch3 !== null && entry.snatch3 !== undefined
                  ? entry.snatch3
                  : "—"
              }}
            </td>
            <td class="px-3 py-3">
              {{
                entry.cj1 !== null && entry.cj1 !== undefined ? entry.cj1 : "—"
              }}
            </td>
            <td class="px-3 py-3">
              {{
                entry.cj2 !== null && entry.cj2 !== undefined ? entry.cj2 : "—"
              }}
            </td>
            <td class="px-3 py-3">
              {{
                entry.cj3 !== null && entry.cj3 !== undefined ? entry.cj3 : "—"
              }}
            </td>
          </tr>
          <tr
            *ngIf="(competition.details || []).length === 0"
            class="text-sm text-[#a8b2d2]"
          >
            <td class="p-4" colspan="12">Aucune inscription trouvée.</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div
      class="flex items-center justify-between border-t border-[#212e56]/30 p-4 text-sm text-[#a8b2d2]"
    >
      <div>
        Affichage {{ (currentPage - 1) * pageSize + 1 }} -
        {{ Math.min(currentPage * pageSize, totalItems) }} sur
        {{ totalItems || 0 }}
      </div>
      <div class="flex items-center gap-2">
        <button
          (click)="changePage(currentPage - 1)"
          [disabled]="currentPage <= 1"
          class="rounded bg-[#050811]/60 px-3 py-1"
        >
          Préc
        </button>
        <div class="w-10 text-center">{{ currentPage || 1 }}</div>
        <button
          (click)="changePage(currentPage + 1)"
          [disabled]="currentPage >= totalPages"
          class="rounded bg-[#050811]/60 px-3 py-1"
        >
          Suiv
        </button>
      </div>
    </div>
  </div>
</div>
